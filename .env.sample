# ===========================================
# Vinyl Vault Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!

# =============================================================================
# MONGODB CONFIGURATION
# =============================================================================
# MongoDB stores both session data (BFF) and domain data (Backend).
# In local development, both use the same MongoDB instance.
# In production, you may want to use separate instances for security and scaling.

# MongoDB Connections (multi-tenant)
# Used by: packages/bff (session store) and packages/backend (tenant + registry data)
# Default: Local development with MongoDB on standard port
# Docker: Use mongodb service hostname instead of localhost
MONGODB_URI=mongodb://localhost:27017/vinylvault_bff
MONGODB_URI_BASE=mongodb://localhost:27017
MONGODB_REGISTRY_URI=mongodb://localhost:27017/vinylvault_registry
# Docker development alternatives:
# MONGODB_URI=mongodb://mongodb:27017/vinylvault_bff
# MONGODB_URI_BASE=mongodb://mongodb:27017
# MONGODB_REGISTRY_URI=mongodb://mongodb:27017/vinylvault_registry

# =============================================================================
# GITHUB OAUTH CONFIGURATION
# =============================================================================
# Vinyl Vault uses GitHub as the single sign-on (SSO) provider.
# Users authenticate via GitHub OAuth Web Application Flow.
# See docs/GITHUB_OAUTH_SETUP.md for step-by-step setup instructions.

# GitHub OAuth App Client ID
# Obtained from: https://github.com/settings/developers
# This is your public identifier for the GitHub OAuth App
GITHUB_CLIENT_ID=your_github_client_id

# GitHub OAuth App Client Secret
# Obtained from: https://github.com/settings/developers
# KEEP THIS SECRET! This is used to exchange authorization codes for access tokens.
# NEVER commit this to version control.
GITHUB_CLIENT_SECRET=your_github_client_secret

# GitHub OAuth Callback URL
# Must match EXACTLY what you configure in your GitHub OAuth App settings.
# This is where GitHub redirects the user after authentication.
# For local development with localhost:
GITHUB_CALLBACK_URL=http://localhost:3001/auth/github/callback
# For local development with IP address (e.g., on a local network):
# GITHUB_CALLBACK_URL=http://192.168.1.102:3001/auth/github/callback
# For production (replace with your domain):
# GITHUB_CALLBACK_URL=https://yourdomain.com/auth/github/callback

# =============================================================================
# SECURITY SECRETS
# =============================================================================
# These secrets are used for cryptographic signing and validation.
# Generate secure random strings for production!
# 
# Generate a random secret in your terminal:
#    - macOS/Linux: openssl rand -base64 32
#    - Node.js: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#
# MINIMUM 32 characters recommended. Longer is better.
# KEEP ALL SECRETS SECURE AND NEVER COMMIT THEM!

# JWT_SECRET
# Used by: BFF and Backend
# Purpose: Signing and verifying JWT tokens exchanged between BFF and Backend.
# This secret MUST be identical in both BFF and Backend.
# If changed, all existing tokens become invalid.
JWT_SECRET=change_this_to_a_secure_random_string_in_production

# SESSION_SECRET
# Used by: BFF (express-session middleware)
# Purpose: Signing session cookies for user sessions after GitHub authentication.
# Users will be logged out if this secret is rotated.
SESSION_SECRET=change_this_to_a_secure_random_string_in_production

# JWT_EXPIRES_IN
# Used by: BFF and Backend
# Purpose: Controls how long JWT tokens are valid.
# Format: Duration string (e.g., "15m", "1h", "7d")
# Short expiration (e.g., 15m) is more secure but requires refresh tokens.
# Default: 15m (15 minutes)
JWT_EXPIRES_IN=15m

# =============================================================================
# SERVICE PORTS
# =============================================================================
# Ports used by each service in the monorepo.
# In Docker, these are internal container ports; exposed ports are in docker-compose.yml.

# BFF Port
# Used by: packages/bff (Backend-for-Frontend)
# The BFF serves as a GraphQL gateway between the frontend and backend.
# Default: 3001
BFF_PORT=3001

# Backend Port
# Used by: packages/backend (Domain GraphQL API)
# The backend exposes a GraphQL API for domain operations.
# Default: 4000
BACKEND_PORT=4000

# =============================================================================
# SERVICE URLS
# =============================================================================
# URLs for inter-service communication and frontend configuration.

# Frontend URL
# Used by: BFF (for OAuth redirects and CORS configuration)
# The public URL where the frontend is accessible.
# For local development with localhost:
FRONTEND_URL=http://localhost:3000
# For local development with IP address:
# FRONTEND_URL=http://192.168.1.102:3000
# For production:
# FRONTEND_URL=https://yourdomain.com

# Backend URL
# Used by: BFF (to make GraphQL requests to the backend)
# The URL where the Backend GraphQL API is accessible from the BFF.
# For local development:
BACKEND_URL=http://localhost:4000/graphql
# Docker development (BFF communicates with backend container):
# BACKEND_URL=http://backend:4000/graphql

# =============================================================================
# EXTERNAL MUSIC API INTEGRATIONS (Optional)
# =============================================================================
# These are optional integrations for enhanced metadata lookups.
# If not configured, the app still works but may have limited metadata.

# Discogs API Token
# Source: https://www.discogs.com/settings/developers
# Purpose: Look up vinyl records by barcode and fetch metadata.
# Optional: If not set, Discogs integration is skipped.
# Get your token from: https://www.discogs.com/settings/developers
DISCOGS_API_TOKEN=

# MusicBrainz User-Agent
# Used by: packages/backend (musicbrainz.ts service)
# Purpose: Required header for MusicBrainz API requests.
# Format: AppName/Version (contact-email)
# Required for MusicBrainz API access to avoid rate limiting.
# Replace with your application name and contact email.
MUSICBRAINZ_USER_AGENT=VinylVault/1.0 (your-email@example.com)

# =============================================================================
# NODE ENVIRONMENT
# =============================================================================
# Controls the Node.js environment mode (affects logging, error handling, etc.)
# Values: development, production, test
NODE_ENV=development
